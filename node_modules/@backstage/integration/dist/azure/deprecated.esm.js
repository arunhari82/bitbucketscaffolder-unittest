import { CachedAzureDevOpsCredentialsProvider } from './CachedAzureDevOpsCredentialsProvider.esm.js';

async function getAzureRequestOptions(config, additionalHeaders) {
  var _a;
  const headers = additionalHeaders ? { ...additionalHeaders } : {};
  const credentialConfig = (_a = config.credentials) == null ? void 0 : _a.filter(
    (credential) => credential.organizations === void 0 || credential.organizations.length === 0
  )[0];
  if (credentialConfig) {
    const credentialsProvider = CachedAzureDevOpsCredentialsProvider.fromAzureDevOpsCredential(
      credentialConfig
    );
    const credentials = await credentialsProvider.getCredentials();
    return {
      headers: {
        ...credentials == null ? void 0 : credentials.headers,
        ...headers
      }
    };
  }
  return { headers };
}

export { getAzureRequestOptions };
//# sourceMappingURL=deprecated.esm.js.map
